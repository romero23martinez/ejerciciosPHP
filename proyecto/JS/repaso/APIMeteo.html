<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meteo</title>
</head>
<body>
    <h1>El clima en tu ciudad</h1>

    <button onclick="obtenerClima()">Recargar</button>
    <table border="1">
        <thead>
            <tr>
                <th>Hora</th>
                <th>Temperatura</th>
                <th>Humedad</th>
                <th>Velocidad viento</th>
            </tr>
        </thead>
        <tbody id="body"></tbody>
    </table>

    <script>
       
        const URL = "https://api.open-meteo.com/v1/forecast?latitude=41.6561&longitude=-0.8773&hourly=temperature_2m,relative_humidity_2m,wind_speed_10m&timezone=Europe%2FBerlin";

        async function obtenerClima(ciudad) {
            const respuesta = await fetch(URL);
            const datos = await respuesta.json();

            document.getElementById("body").innerHTML = "";


           // const horas = datos.hourly.time.at(-1);
           // const temperatura = datos.hourly.temperature_2m.at(-1);
           // document.getElementById("body").innerHTML = `
           // <tr>
          //      <td>${horas}</td>
           //     <td>${temperatura}</td>
          //  </tr>
          //  `;

          const horas = datos.hourly.time.reverse();
          const temperatura = datos.hourly.temperature_2m.reverse();
          const humedad = datos.hourly.relative_humidity_2m.reverse();
          const viento = datos.hourly.wind_speed_10m.reverse();

          for (i = 0; i < horas.length; i++){
            document.getElementById("body").innerHTML += `
            <tr>
                <td>${horas[i]}</td>
                <td>${temperatura[i]}</td>
                <td>${humedad[i]}</td>
                <td>${viento[i]}</td>
            </tr>
            `;
          }
            
        }
       
        obtenerClima();
    </script>
</body>
</html>